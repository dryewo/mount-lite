<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>mount.lite documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Mount-lite</span> <span class="project-version">0.9.7</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1 "><a href="01-basics.html"><div class="inner"><span>The basics</span></div></a></li><li class="depth-1 "><a href="02-substitutions.html"><div class="inner"><span>Substitutions</span></div></a></li><li class="depth-1 "><a href="03-start-stop-options.html"><div class="inner"><span>Start/stop options</span></div></a></li><li class="depth-1 "><a href="04-reloading.html"><div class="inner"><span>Reloading states</span></div></a></li><li class="depth-1 "><a href="05-parallelism.html"><div class="inner"><span>Parallelism</span></div></a></li><li class="depth-1 "><a href="06-bindings.html"><div class="inner"><span>Bindings</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>mount</span></div></div></li><li class="depth-2 current"><a href="mount.lite.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>lite</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="mount.lite.html#var-bindings"><div class="inner"><span>bindings</span></div></a></li><li class="depth-1"><a href="mount.lite.html#var-defstate"><div class="inner"><span>defstate</span></div></a></li><li class="depth-1"><a href="mount.lite.html#var-dot"><div class="inner"><span>dot</span></div></a></li><li class="depth-1"><a href="mount.lite.html#var-except"><div class="inner"><span>except</span></div></a></li><li class="depth-1"><a href="mount.lite.html#var-on-reload"><div class="inner"><span>on-reload</span></div></a></li><li class="depth-1"><a href="mount.lite.html#var-only"><div class="inner"><span>only</span></div></a></li><li class="depth-1"><a href="mount.lite.html#var-parallel"><div class="inner"><span>parallel</span></div></a></li><li class="depth-1"><a href="mount.lite.html#var-start"><div class="inner"><span>start</span></div></a></li><li class="depth-1"><a href="mount.lite.html#var-state"><div class="inner"><span>state</span></div></a></li><li class="depth-1"><a href="mount.lite.html#var-status"><div class="inner"><span>status</span></div></a></li><li class="depth-1"><a href="mount.lite.html#var-stop"><div class="inner"><span>stop</span></div></a></li><li class="depth-1"><a href="mount.lite.html#var-substitute"><div class="inner"><span>substitute</span></div></a></li><li class="depth-1"><a href="mount.lite.html#var-up-to"><div class="inner"><span>up-to</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">mount.lite</h1><div class="doc"><pre class="plaintext">The core namespace providing the public API
</pre></div><div class="public anchor" id="var-bindings"><h3>bindings</h3><div class="usage"><code>(bindings &amp; var-binding-seq)</code><code>(bindings opts &amp; var-binding-seq)</code></div><div class="doc"><pre class="plaintext">Creates or updates start option map, supplying binding vectors for
the given defstate vars. Make sure the symbols in the binding
vectors are quoted. Multiple uses of this function on the same
option map are merged.</pre></div></div><div class="public anchor" id="var-defstate"><h3>defstate</h3><h4 class="type">macro</h4><div class="usage"><code>(defstate name doc-string? attr-map? bindings? &amp; {:as state-map})</code></div><div class="doc"><pre class="plaintext">Define a state. At least a :start expression should be supplied.
Optionally one can define a :stop expression.</pre></div></div><div class="public anchor" id="var-dot"><h3>dot</h3><div class="usage"><code>(dot &amp; {:as options})</code></div><div class="doc"><pre class="plaintext">Retuns a Graphviz dot representation of the state dependencies.
Currently no options available.</pre></div></div><div class="public anchor" id="var-except"><h3>except</h3><div class="usage"><code>(except &amp; vars)</code><code>(except opts &amp; vars)</code></div><div class="doc"><pre class="plaintext">Creates or updates start/stop option map, starting or stopping all defstate
vars, except the given vars. Multiple uses of this function on the same option map
are united.</pre></div></div><div class="public anchor" id="var-on-reload"><h3>on-reload</h3><div class="usage"><code>(on-reload)</code><code>(on-reload val)</code></div><div class="doc"><pre class="plaintext">Get or set the on-reload override configuration. Default is nil,
meaning the defstates themselves determine how they should respond
to a redefinition. Default for defstates is :cascade, meaning all
states `up-to` the reloaded state (inclusive) are stopped (except
those with :on-cascade set to :skip).</pre></div></div><div class="public anchor" id="var-only"><h3>only</h3><div class="usage"><code>(only &amp; vars)</code><code>(only opts &amp; vars)</code></div><div class="doc"><pre class="plaintext">Creates or updates start/stop option map, only starting or stopping the given
vars. Multiple uses of this function on the same option map are united.</pre></div></div><div class="public anchor" id="var-parallel"><h3>parallel</h3><div class="usage"><code>(parallel threads)</code><code>(parallel opts threads)</code></div><div class="doc"><pre class="plaintext">Creates or updates start/stop option map, starting or stopping
independent vars in parallel using the given number of threads.
Multiple uses of this function on the same option map are overriding
each other.</pre></div></div><div class="public anchor" id="var-start"><h3>start</h3><div class="usage"><code>(start &amp; optss)</code></div><div class="doc"><pre class="plaintext">Start all unstarted states (by default). One or more option maps
can be supplied. The maps can contain the following keys, applied in
the following order, and merged as specified:

:only - Collection of state vars that should be started, when not stopped.
        Multiples of these collections are united.

:except - Collection of state vars that should not be started. Multiples
          of these are united.

:up-to - A defstate var until which the states are started. In case multiple
         option maps are supplied, only the last :up-to option is used.

:parallel - The number of threads to use for parallel starting of the
            states. Default is nil, meaning the current thread will be
            used. In case multiple option maps are supplied, only the
            last :parallel option is used.

:substitute - A map of defstate vars to state-maps (see state macro) whose
              info is used instead of the defstate vars&apos; state. Multiples
              of these maps are merged.

:bindings - A map of defstate vars to binding maps. Multiples of
            these maps are merged.

These option maps are easily created using the only, except, up-to and
substitute functions.</pre></div></div><div class="public anchor" id="var-state"><h3>state</h3><h4 class="type">macro</h4><div class="usage"><code>(state &amp; {:keys [start stop on-reload on-cascade]})</code></div><div class="doc"><pre class="plaintext">Make a state definition, useful for making test or mock states. Use with
substitute function or :substitute key in start info. This is a convenience
macro; a plain state-map can be used in the :substitute start option as well.

Note that the following does not define a state var, and won&apos;t be recognized by
start or stop: (def foo (state ...)).</pre></div></div><div class="public anchor" id="var-status"><h3>status</h3><div class="usage"><code>(status)</code><code>(status &amp; vars)</code></div><div class="doc"><pre class="plaintext">Retrieve status map for all states, or the given state vars.
</pre></div></div><div class="public anchor" id="var-stop"><h3>stop</h3><div class="usage"><code>(stop &amp; optss)</code></div><div class="doc"><pre class="plaintext">Stop all started states (by default). One or more option maps can be
supplied. These maps are merged. The maps can contain the following keys,
applied in the following order:

:only - Collection of state vars that should be stopped, when not started.
        Multiples of these collections are united.

:except - Collection of state vars that should not be stopped. Multiples
          of these are united.

:up-to - A defstate var until which the states are stopped. In case multiple
         option maps are supplied, only the last :up-to option is used.

:parallel - The number of threads to use for parallel stopping of the
            states. Default is nil, meaning the current thread will be
            used. In case multiple option maps are supplied, only the
            last :parallel option is used.

These option maps are easily created using the only, except and parallel
functions.</pre></div></div><div class="public anchor" id="var-substitute"><h3>substitute</h3><div class="usage"><code>(substitute &amp; var-state-seq)</code><code>(substitute opts &amp; var-state-seq)</code></div><div class="doc"><pre class="plaintext">Creates or updates start option map, supplying substitute states for the given
defstate vars. Multiple uses of this function on the same option map are merged.</pre></div></div><div class="public anchor" id="var-up-to"><h3>up-to</h3><div class="usage"><code>(up-to var)</code><code>(up-to opts var)</code></div><div class="doc"><pre class="plaintext">Creates or updates start/stop option map, starting or stopping only
those vars that depend on the given var and itself. Multiple uses of
this function on the same option map are overriding each other.</pre></div></div></div></body></html>