<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>mount.lite documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Mount-lite</span> <span class="project-version">2.0.0-SNAPSHOT</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1 "><a href="01-basics.html"><div class="inner"><span>The basics</span></div></a></li><li class="depth-1 "><a href="02-substitutions.html"><div class="inner"><span>Substitutions</span></div></a></li><li class="depth-1 "><a href="03-start-stop-options.html"><div class="inner"><span>Start up to / stop down to</span></div></a></li><li class="depth-1 "><a href="04-systems-of-states.html"><div class="inner"><span>Multiple systems of states</span></div></a></li><li class="depth-1 "><a href="05-extension-point.html"><div class="inner"><span>Extension point</span></div></a></li><li class="depth-1 "><a href="06-migrating-to-2.html"><div class="inner"><span>Migrating to 2.x</span></div></a></li><li class="depth-1 "><a href="07-troubleshooting.html"><div class="inner"><span>Troubleshooting</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>mount</span></div></div></li><li class="depth-2 current"><a href="mount.lite.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>lite</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="mount.lite.html#var-*states*"><div class="inner"><span>*states*</span></div></a></li><li class="depth-1"><a href="mount.lite.html#var-*substitutes*"><div class="inner"><span>*substitutes*</span></div></a></li><li class="depth-1"><a href="mount.lite.html#var-defstate"><div class="inner"><span>defstate</span></div></a></li><li class="depth-1"><a href="mount.lite.html#var-start"><div class="inner"><span>start</span></div></a></li><li class="depth-1"><a href="mount.lite.html#var-state"><div class="inner"><span>state</span></div></a></li><li class="depth-1"><a href="mount.lite.html#var-status"><div class="inner"><span>status</span></div></a></li><li class="depth-1"><a href="mount.lite.html#var-stop"><div class="inner"><span>stop</span></div></a></li><li class="depth-1"><a href="mount.lite.html#var-with-session"><div class="inner"><span>with-session</span></div></a></li><li class="depth-1"><a href="mount.lite.html#var-with-substitutes"><div class="inner"><span>with-substitutes</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">mount.lite</h1><div class="doc"><pre class="plaintext">The core namespace providing the public API
</pre></div><div class="public anchor" id="var-*states*"><h3>*states*</h3><h4 class="dynamic">dynamic</h4><div class="usage"></div><div class="doc"><pre class="plaintext">Atom keeping track of defined states (by namespaced
keywords) internally. Declared public and dynamic here, as an
extension point to influence which states are started or stopped.
Do not fiddle with the root binding.</pre></div></div><div class="public anchor" id="var-*substitutes*"><h3>*substitutes*</h3><h4 class="dynamic">dynamic</h4><div class="usage"></div><div class="doc"><pre class="plaintext">Can be bound to a map with vars as keys and State records as
values. The :start and :stop expressions of the State value will
be used when the corresponding var key is started. The
`with-substitutes` macro offers a nicer syntax.</pre></div></div><div class="public anchor" id="var-defstate"><h3>defstate</h3><h4 class="type">macro</h4><div class="usage"><code>(defstate name &amp; args)</code></div><div class="doc"><pre class="plaintext">Define a state. At least a :start expression should be supplied.
Optionally one can define a :stop expression. Supports docstring and
attribute map.</pre></div></div><div class="public anchor" id="var-start"><h3>start</h3><div class="usage"><code>(start)</code><code>(start up-to-var)</code></div><div class="doc"><pre class="plaintext">Start all the loaded defstates, or only the defstates up to the
given state var. Only stopped defstates are started, and they are
started in the context of the current thread.</pre></div></div><div class="public anchor" id="var-state"><h3>state</h3><h4 class="type">macro</h4><div class="usage"><code>(state &amp; {:keys [start stop name], :or {name &quot;-anonymous-&quot;}})</code></div><div class="doc"><pre class="plaintext">Create an anonymous state, useful for substituting. Supports three
keyword arguments. A required :start expression, an optional :stop
expression, and an optional :name for the state.</pre></div></div><div class="public anchor" id="var-status"><h3>status</h3><div class="usage"><code>(status)</code></div><div class="doc"><pre class="plaintext">Retrieve status map for all states.
</pre></div></div><div class="public anchor" id="var-stop"><h3>stop</h3><div class="usage"><code>(stop)</code><code>(stop down-to-var)</code></div><div class="doc"><pre class="plaintext">Stop all the loaded defstates, or only the defstates down to the
given state var. Only started defstates are stopped, and they are
stopped in the context of the current or parent thread where they
were started.</pre></div></div><div class="public anchor" id="var-with-session"><h3>with-session</h3><h4 class="type">macro</h4><div class="usage"><code>(with-session &amp; body)</code></div><div class="doc"><pre class="plaintext">Creates a new thread, with a new system of states. All states are
initially in the stopped status in this thread, regardless of the
status in the thread that spawns this new session. This spawned
thread and its subthreads will automatically use the states that are
started within this thread or subthreads. Exiting the spawned thread
will automatically stop all states in this session.

Returns a map with the spawned :thread and a :promise that will be
set to the result of the body or an exception.</pre></div></div><div class="public anchor" id="var-with-substitutes"><h3>with-substitutes</h3><h4 class="type">macro</h4><div class="usage"><code>(with-substitutes var-sub-pairs &amp; body)</code></div><div class="doc"><pre class="plaintext">Given a vector with var-state pairs, an inner start function will
use the :start expression of the substitutes for the specified
vars. Nested `with-substitutes` are merged.</pre></div></div></div></body></html>